{"remainingRequest":"/home/artanis/workspace/proj-covid19/node_modules/babel-loader/lib/index.js!/home/artanis/workspace/proj-covid19/src/mixins/ErrorHandler.js","dependencies":[{"path":"/home/artanis/workspace/proj-covid19/src/mixins/ErrorHandler.js","mtime":1607193304159},{"path":"/home/artanis/workspace/proj-covid19/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/artanis/workspace/proj-covid19/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2FydGFuaXMvd29ya3NwYWNlL3Byb2otY292aWQxOS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2FydGFuaXMvd29ya3NwYWNlL3Byb2otY292aWQxOS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IEh0dHBTdGF0dXMgZnJvbSAnQC9jbGFzc2VzL2h0dHAvSHR0cFN0YXR1cyc7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnQC91dGlscyc7IC8vIGxldCBWdWVTY3JvbGxUbyA9IHJlcXVpcmUoJ3Z1ZS1zY3JvbGx0bycpCgovKgogIEhhbmRsZXMgZXJyb3JzIGZvciByZXF1ZXN0cwogKi8KCmV4cG9ydCB2YXIgZXJyb3JIYW5kbGVyID0gewogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ3JlZGlyZWN0VG9Mb2dpblBhZ2UnXSkpLCB7fSwgewogICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycikgewogICAgICBpZiAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMgPT09IEh0dHBTdGF0dXMuRk9SQklEREVOKSB7CiAgICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gYmVjYXVzZSB0aGUgcGFnZSB1c2VyIGlzIG5vdCBhdXRob3JpemVkCiAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3NldENvcmVMb2FkZXInLCB7CiAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgdXNlQ291bnRlcjogZmFsc2UKICAgICAgICB9KTsKICAgICAgICB0aGlzLnJlZGlyZWN0VG9Mb2dpblBhZ2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnUlVOVElNRSBFUlJPUjonLCBlcnIpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRm9ybUVycm9yOiBmdW5jdGlvbiBoYW5kbGVGb3JtRXJyb3IoZXJyLCBmb3JtKSB7CiAgICAgIHZhciByZXNwb25zZURhdGEgPSBlcnIuZGF0YSB8fCBlcnIucmVzcG9uc2UuZGF0YTsKICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlRGF0YTo6OicsIHJlc3BvbnNlRGF0YSwgZm9ybSk7CgogICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZURhdGEpKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlc3BvbnNlRGF0YSksCiAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGVycm9yID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIHZhciBmaWVsZCA9IGZvcm0uZ2V0RmllbGRGb3JJZChlcnJvci51aWQpOwoKICAgICAgICAgICAgaWYgKGZpZWxkKSB7CiAgICAgICAgICAgICAgZmllbGQuc2V0VmFsaWRhdGlvbihlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CiAgICAgIH0gLy8gdGhpcy5zY3JvbGxUb0ZpcnN0RXJyb3IoKQoKICAgIH0KICAgIC8qICAgICBzY3JvbGxUb0ZpcnN0RXJyb3IgKCkgewogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICBsZXQgaW52YWxpZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpbnZhbGlkJylbMF0KICAgICAgICAgICAgaWYgKGludmFsaWRFbGVtZW50KSB7CiAgICAgICAgICAgICAgVnVlU2Nyb2xsVG8uc2Nyb2xsVG8oaW52YWxpZEVsZW1lbnQpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSAqLwoKICB9KQp9Ow=="},{"version":3,"sources":["/home/artanis/workspace/proj-covid19/src/mixins/ErrorHandler.js"],"names":["mapActions","HttpStatus","EventBus","errorHandler","methods","handleError","err","response","status","FORBIDDEN","$emit","show","useCounter","redirectToLoginPage","console","log","handleFormError","form","responseData","data","Array","isArray","error","field","getFieldForId","uid","setValidation","message"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,MAA3B;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,SAASC,QAAT,QAAyB,SAAzB,C,CAEA;;AAEA;AACA;AACA;;AACA,OAAO,IAAIC,YAAY,GAAG;AACxBC,EAAAA,OAAO,kCACFJ,UAAU,CAAC,CACZ,qBADY,CAAD,CADR;AAILK,IAAAA,WAJK,uBAIQC,GAJR,EAIa;AAChB,UAAIA,GAAG,CAACC,QAAJ,IAAgBD,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwBP,UAAU,CAACQ,SAAvD,EAAkE;AAChE;AACAP,QAAAA,QAAQ,CAACQ,KAAT,CAAe,eAAf,EAAgC;AAAEC,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,UAAU,EAAE;AAA1B,SAAhC;AACA,aAAKC,mBAAL;AACD,OAJD,MAIO;AACLC,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BT,GAA9B;AACD;AACF,KAZI;AAaLU,IAAAA,eAbK,2BAaYV,GAbZ,EAaiBW,IAbjB,EAauB;AAC1B,UAAIC,YAAY,GAAGZ,GAAG,CAACa,IAAJ,IAAYb,GAAG,CAACC,QAAJ,CAAaY,IAA5C;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BG,YAA/B,EAA6CD,IAA7C;;AACA,UAAIG,KAAK,CAACC,OAAN,CAAcH,YAAd,CAAJ,EAAiC;AAAA,mDACbA,YADa;AAAA;;AAAA;AAC/B,8DAAgC;AAAA,gBAAvBI,KAAuB;AAC9B,gBAAIC,KAAK,GAAGN,IAAI,CAACO,aAAL,CAAmBF,KAAK,CAACG,GAAzB,CAAZ;;AACA,gBAAIF,KAAJ,EAAW;AACTA,cAAAA,KAAK,CAACG,aAAN,CAAoBJ,KAAK,CAACK,OAA1B;AACD;AACF;AAN8B;AAAA;AAAA;AAAA;AAAA;AAOhC,OAVyB,CAW1B;;AACD;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAjCS;AADiB,CAAnB","sourcesContent":["import { mapActions } from 'vuex'\nimport HttpStatus from '@/classes/http/HttpStatus'\nimport { EventBus } from '@/utils'\n\n// let VueScrollTo = require('vue-scrollto')\n\n/*\n  Handles errors for requests\n */\nexport let errorHandler = {\n  methods: {\n    ...mapActions([\n      'redirectToLoginPage'\n    ]),\n    handleError (err) {\n      if (err.response && err.response.status === HttpStatus.FORBIDDEN) {\n        // redirect to login because the page user is not authorized\n        EventBus.$emit('setCoreLoader', { show: true, useCounter: false })\n        this.redirectToLoginPage()\n      } else {\n        console.log('RUNTIME ERROR:', err)\n      }\n    },\n    handleFormError (err, form) {\n      let responseData = err.data || err.response.data\n      console.log('responseData:::', responseData, form)\n      if (Array.isArray(responseData)) {\n        for (let error of responseData) {\n          let field = form.getFieldForId(error.uid)\n          if (field) {\n            field.setValidation(error.message)\n          }\n        }\n      }\n      // this.scrollToFirstError()\n    },\n/*     scrollToFirstError () {\n      this.$nextTick(() => {\n        let invalidElement = document.getElementsByClassName('invalid')[0]\n        if (invalidElement) {\n          VueScrollTo.scrollTo(invalidElement)\n        }\n      })\n    } */\n  }\n}\n"]}]}